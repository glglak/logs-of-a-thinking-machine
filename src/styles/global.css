@import "tailwindcss";
@import "./typography.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

:root,
html[data-theme="light"] {
  --background: #fdfdfd;
  --foreground: #282728;
  --accent: #1e90ff;
  --muted: #e6e6e6;
  --border: #ece9e9;
}

html[data-theme="dark"] {
  --background: #212737;
  --foreground: #eaedf3;
  --accent: #ff851b;
  --muted: #343f60bf;
  --border: #ab4b08;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-border: var(--border);
}

@layer base {
  * {
    @apply border-border outline-accent/75;
    scrollbar-width: auto;
    scrollbar-color: var(--color-muted) transparent;
  }
  html {
    @apply overflow-y-scroll scroll-smooth;
  }
  body {
    @apply flex min-h-svh flex-col bg-background font-sans text-foreground selection:bg-accent/75 selection:text-background;
  }
  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
  section,
  footer {
    @apply mx-auto max-w-app px-4;
  }
}

@utility max-w-app {
  @apply max-w-3xl;
}

.active-nav {
  @apply underline decoration-wavy decoration-2 underline-offset-4;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 1rem;
}

/* Image styling */
img {
  /* Smooth transition for fallback images */
  transition: opacity 0.3s ease;
}

/* Style for fallback images */
img.broken-image-fallback {
  opacity: 0.7;
  border: 2px dashed var(--color-border);
  border-radius: 8px;
  padding: 1rem;
  background: var(--color-muted);
  filter: grayscale(50%);
}

/* Hide image container when image fails (for news feed style) */
.image-container:has(img[style*="display: none"]) {
  display: none !important;
}

/* Make broken images more visible with background */
img[src*="default-image.svg"],
img.broken-image-fallback {
  background: linear-gradient(135deg, var(--color-muted) 0%, var(--color-background) 100%);
  min-height: 150px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Consistent theme colors */
:root {
  --theme-blue: #1e90ff;
  --theme-blue-dark: #0066cc;
  --theme-blue-light: #4da6ff;
  --theme-gray-50: #f9fafb;
  --theme-gray-100: #f3f4f6;
  --theme-gray-200: #e5e7eb;
  --theme-gray-300: #d1d5db;
  --theme-gray-400: #9ca3af;
  --theme-gray-500: #6b7280;
  --theme-gray-600: #4b5563;
  --theme-gray-700: #374151;
  --theme-gray-800: #1f2937;
  --theme-gray-900: #111827;
}

/* Logo styling - ensure proper display */
header img[src*="logo.png"],
header .w-10.h-10 img {
  object-fit: contain !important;
  object-position: center !important;
  max-width: 100% !important;
  max-height: 100% !important;
  width: auto !important;
  height: auto !important;
}

/* Ensure logo container maintains aspect ratio */
header .w-10.h-10 {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 2.5rem;
  min-height: 2.5rem;
}

header {
  @apply bg-gradient-to-b from-accent/20 to-background backdrop-blur-sm;
}
#top-nav-wrap {
  @apply bg-background/80 backdrop-blur-md rounded-b-md;
}
